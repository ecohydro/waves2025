---
description: Managing task lists to track progress on completing a PRD
globs: 
alwaysApply: false
---
---
description: Managing a Task List
globs: ["tasks/*"]
---
# Task List Management

Guidelines for managing task lists in markdown files to track progress on completing a PRD

## Task Pre-flight
Before starting any tasks that require terminal use, ensure that you have activated the canoply conda environment.

## Task Implementation
- **One sub-task at a time:** Do **NOT** start the next sub‑task until you ask the user for permission and they say "yes" or "y"
- **Completion protocol:**
  1. When you finish a **sub‑task**, immediately mark it as completed by changing `[ ]` to `[x]`.
  2. If **all** subtasks underneath a parent task are now `[x]`, also mark the **parent task** as completed.
- **Automatic completion rule:** ALWAYS check if all child subtasks are complete and automatically mark parent tasks as complete. This applies recursively up the task hierarchy.
- Stop after each sub‑task and wait for the user's go‑ahead.

## CRITICAL: Testing and Validation Requirements

**NEVER mark a task as complete without proper testing and validation.**

### Before Marking Any Task Complete:
1. **Run relevant tests** for the functionality implemented
2. **Execute validation scripts** to check for common issues
3. **Test in development environment** to ensure it works
4. **Document test results** and any issues found
5. **Only mark complete** if all tests pass and validation succeeds

### Testing Requirements by Task Type:
- **Infrastructure tasks:** Run validation scripts, test with real data
- **Content migration:** Run integrity checks, validate cross-references
- **UI/Components:** Run unit tests, test in browser, check accessibility
- **API/Integration:** Test endpoints, error handling, performance

### If Tests Fail:
1. **DO NOT mark task complete**
2. **Fix the issues** identified
3. **Re-run all tests** after fixes
4. **Document the fixes** made
5. **Only then mark complete**

## Task List Maintenance

1. **Update the task list as you work:**
   - Mark tasks and subtasks as completed (`[x]`) per the protocol above.
   - Add new tasks as they emerge.

2. **Maintain the "Relevant Files" section:**
   - List every file created or modified.
   - Give each file a one‑line description of its purpose.

## AI Instructions

When working with task lists, the AI must:

1. Regularly update the task list file after finishing any significant work.
2. Follow the completion protocol:
   - Mark each finished **sub‑task** `[x]`.
   - Mark the **parent task** `[x]` once **all** its subtasks are `[x]`.
3. **CRITICAL: Automatic task completion check:**
   - After marking any subtask complete, ALWAYS check if all sibling subtasks are also complete
   - If all subtasks under a parent are complete, automatically mark the parent task complete
   - This applies recursively - check parent tasks of parent tasks
   - Never leave a parent task unmarked when all its children are complete
4. **CRITICAL: Testing before completion:**
   - Before marking any task complete, run appropriate tests and validation
   - If tests fail, fix issues and re-test before marking complete
   - Document test results and any fixes made
5. Add newly discovered tasks.
6. Keep "Relevant Files" accurate and up to date.
7. Before starting work, check which sub‑task is next.
8. After implementing a sub‑task, update the file and then pause for user approval.
